<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="cycarts â€“ cyconverts, the converter tools" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="/stylesheets/style.css" />

  <link rel="icon" href="logo.png" />
  <title> cyconverts </title>
</head>

<body>
  <%- include('../partials/Header'); %>
    <%- include('../partials/Body'); %>

      <%- include('../partials/Footer'); %>




        <!-- <section class="text-gray-600 body-font">
          <div class="container px-5 py-4 mx-auto">
            <div class="flex flex-wrap -mx-4 -mb-10 text-center">

              <div class="w-1/3 mb-10 px-4 mx-11 rounded-lg shadow-md  cursor-pointer hover:shadow-2xl">
                <h2 class="title-font text-2xl font-medium text-gray-900 mt-6 mb-3">Image Converter </h2>
                <p class="text-2xl italic text-blue-900">Convert your image into any format</p>
                <hr>
                <form action="/processimage" method="post" enctype="multipart/form-data">
                  <div class="py-4">
                    <input type="file" name="file" required id="">

                    <div class="pt-5">

                      <label class="radio-inline"><input class="mx-1" type="radio" name="format" value="png"
                          checked />png</label>
                      <label class="radio-inline"><input class="mx-1" type="radio" name="format"
                          value="jpg" />jpg</label>
                      <label class="radio-inline"><input class="mx-1" type="radio" name="format"
                          value="webp" />webp</label>
                      <label class="radio-inline"><input class="mx-1" type="radio" name="format"
                          value="jpeg" />jpeg</label>
                      <label class="radio-inline"><input class="mx-1" type="radio" name="format"
                          value="svg" />svg</label>
                      <label class="radio-inline"><input class="mx-1" type="radio" name="format"
                          value="gif" />gif</label>

                    </div>
                  </div>



                  <button
                    class="my-2 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg w-full">
                    Convert & Download
                  </button>

                </form>


              </div>

              <div class="w-1/3 mb-10 px-4 rounded-lg shadow-md  cursor-pointer hover:shadow-2xl">

                <h2 class="title-font text-2xl font-medium text-gray-900 mt-6 mb-3">Video Converter</h2>
                <p class="text-2xl italic text-blue-900">Convert your video into any format <span class='text-gray-400'>
                    eg: Gif, Avi ... </span> </p>
                <hr>

                <form id="form" enctype="multipart/form-data">
                  <br>
                  <div class="form-group">
                    <input type="file" id="upload-input" accept="video/*" name="file" class="form-control" required />
                  </div>
                  <div class="progress">
                    <div class="progress-bar" role="progressbar"></div>
                  </div>
                  <div class="form-group py-3">
                    <label for="format">Select Format:</label>
                    <select class="form-control" id="format">
                      <option value="mp4" selected>MP4</option>
                      <option value="avi">AVI</option>
                      <option value="wmv">WMV</option>
                      <option value="mkv">MKV</option>
                      <option value="flv">FLV</option>
                      <option value="gif">GIF</option>
                      <option value="mov">MOV</option>
                      <option value="m4v">M4V</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <button id="button" class="my-2 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none
                          hover:bg-indigo-600 rounded text-lg w-full">Download Video</button>
                  </div>
                </form>

              </div>


            </div>
          </div>
        </section> -->
        <!-- test ends -->





        <!-- test -->
        <!-- 
        <section class="text-gray-600 body-font">
          <div class="container px-5  mx-auto">
            <div class="flex flex-wrap -mx-4 -mb-10 text-center">

              <div class="w-1/3 mb-10 px-4 mx-11 rounded-lg shadow-md  cursor-pointer hover:shadow-2xl">
                <h2 class="title-font text-2xl font-medium text-gray-900 mt-6 mb-3">Docs Converter </h2>
                <p class="text-2xl italic text-blue-900">Convert your WORLD TO PDF</p>
                <hr>
                <form action="/docs-converter" method="post" enctype="multipart/form-data">
                  <input class="my-4" type="file" required name="file">
                  <button type="submit"
                    class="mt-5 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg w-full">
                    Convert & Download
                  </button>
                </form>
              </div>

              <div class="w-1/3 mb-10 px-4 rounded-lg shadow-md  cursor-pointer hover:shadow-2xl">

                <h2 class="title-font text-2xl font-medium text-gray-900 mt-6 mb-3">Image reducer</h2>
                <p class="text-2xl italic text-blue-900"> Just put image & get the reduced image </p>
                <hr>

                <form action="/processimage" method="post" enctype="multipart/form-data">

                  <div class="form-group">
                    <input type="file" name="file" required class="form-control my-2" />
                  </div>
                  <div class="py-3">
                    <div class="form-group py-3">

                      <input placeholder="Width"
                        class="my-4 form-control placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"
                        type="number" name="width" id="">
                    </div>
                    <div class="form-group">

                      <input placeholder="height"
                        class="form-control placeholder:italic placeholder:text-slate-400 block bg-white w-full border border-slate-300 rounded-md py-2 pl-9 pr-3 shadow-sm focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 sm:text-sm"
                        type="number" name="height" id="">
                    </div>
                  </div>
                  <button
                    class="my-2 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg w-full">
                    Convert & Download
                  </button>
                </form>

              </div>


            </div>
          </div>
        </section> -->
        <!-- test ends -->





</body>
<script src="https://cdn.jsdelivr.net/npm/browser-image-converter@0.1.1/dist/index.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
  var files;
  $("#form").on("submit", function (e) {
    e.preventDefault();
    //$('#upload-input').click();
    $(".progress-bar").text("0%");
    $("#button").text("Uploading File");
    $("#button").prop("disabled", "true");
    $(".progress-bar").width("0%");
    convertFile();
  });
  $("#upload-input").on("change", function () {
    files = $(this).get(0).files;
    var fileExtension = [
      "mp4",
      "avi",
      "gif",
      "flv",
      "m4v",
      "mkv",
      "mov",
      "wmv",
    ];
    if (
      $.inArray(
        $(this).val().split(".").pop().toLowerCase(),
        fileExtension
      ) == -1
    ) {
      $(this).val("");

      alert("Please upload a video file");
    }
  });
  function convertFile() {
    if (files.length > 0) {
      // create a FormData object which will be sent as the data payload in the
      // AJAX request
      var formData = new FormData();
      // loop through all the selected files and add them to the formData object
      for (var i = 0; i < files.length; i++) {
        var file = files[i];
        // add the files to formData object for the data payload
        formData.append("file", file, file.name);
      }
      console.log(formData);
      var formdata2 = new FormData();
      $.ajax({
        url: "/uploadvideo",
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function (data) {
          console.log(data, "from success function");
          var data2 = { path: data.path, format: $('#format').val() };
          console.log("upload successful!\n" + data.path);
          $("#button").text("File Uploaded Now Processing");
          $("#button").prop("disabled", true);
          formdata2.append("path", data.path);
          $.ajax({
            url: "/convertvideo",
            type: "POST",
            data: JSON.stringify(data2),
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
              window.open("/download?path=" + data.path);
              // $.ajax({ url: `/download?path=` + data.path, type: "GET" })
              console.log("just open the windows ", data.path)
              $("#button").text("Upload File");
              $("#button").prop("disabled", false);
              // location.reload();
            },
          });
        },
        xhr: function () {
          // create an XMLHttpRequest
          var xhr = new XMLHttpRequest();
          // listen to the 'progress' event
          xhr.upload.addEventListener(
            "progress",
            function (evt) {
              if (evt.lengthComputable) {
                // calculate the percentage of upload completed
                var percentComplete = evt.loaded / evt.total;
                percentComplete = parseInt(percentComplete * 100);
                // update the Bootstrap progress bar with the new percentage
                $(".progress-bar").text(percentComplete + "%");
                $(".progress-bar").width(percentComplete + "%");
                // once the upload reaches 100%, set the progress bar text to done
                if (percentComplete === 100) {
                  $(".progress-bar").html("Done");
                }
              }
            },
            false
          );
          return xhr;
        },
      });
    }
  }
</script>

</html>